<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>main &mdash; GUI Resource Monitor 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> GUI Resource Monitor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"></div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GUI Resource Monitor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">main</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for main</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtChart</span> <span class="kn">import</span> <span class="n">QChart</span><span class="p">,</span> <span class="n">QPieSeries</span><span class="p">,</span> <span class="n">QPieSlice</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span><span class="p">,</span> <span class="n">QtChart</span><span class="p">,</span> <span class="n">QtCore</span>

<span class="kn">from</span> <span class="nn">Resources</span> <span class="kn">import</span> <span class="o">*</span>


<div class="viewcode-block" id="init_tab_content"><a class="viewcode-back" href="../main.html#main.init_tab_content">[docs]</a><span class="k">def</span> <span class="nf">init_tab_content</span><span class="p">(</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize tab content with chart and curve for resource usage monitoring (CPU, memory, network)</span>
<span class="sd">    :param x_range: x range</span>
<span class="sd">    :param y_range: y range</span>
<span class="sd">    :param x_label: x label</span>
<span class="sd">    :param y_label: y label</span>
<span class="sd">    :return: chart, curve</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resource_plot</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">resource_plot</span><span class="o">.</span><span class="n">showGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">resource_plot</span><span class="o">.</span><span class="n">setYRange</span><span class="p">(</span><span class="n">y_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">resource_plot</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">resource_plot</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">y_label</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>
    <span class="n">resource_plot</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">x_label</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">resource_plot</span></div>


<div class="viewcode-block" id="create_cpu_stats"><a class="viewcode-back" href="../main.html#main.create_cpu_stats">[docs]</a><span class="k">def</span> <span class="nf">create_cpu_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create CPU stats tab content (chart, curve, labels) and start monitoring. CPU usage is updated every 1 second with</span>
<span class="sd">    percentages per core, physical and logical core, cpu max, min and current frequency</span>
<span class="sd">    :param tab: tab widget to add</span>
<span class="sd">    cpu stats to</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cpu_physical_cores</span><span class="p">,</span> <span class="n">cpu_logical_cores</span> <span class="o">=</span> <span class="n">get_cpu_count</span><span class="p">()</span>

    <span class="n">physical_cores_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Physical cores: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_physical_cores</span><span class="p">))</span>
    <span class="n">logical_cores_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Logical cores: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_logical_cores</span><span class="p">))</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">physical_cores_label</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">logical_cores_label</span><span class="p">)</span>

    <span class="n">cpu_frequency</span> <span class="o">=</span> <span class="n">get_cpu_freq</span><span class="p">()</span>

    <span class="n">cpu_freq_max_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;CPU max frequency: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_frequency</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; MHz&quot;</span><span class="p">)</span>
    <span class="n">cpu_freq_min_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;CPU min frequency: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_frequency</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; MHz&quot;</span><span class="p">)</span>
    <span class="n">cpu_freq_current_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;CPU current frequency: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_frequency</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; MHz&quot;</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpu_freq_max_label</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpu_freq_min_label</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpu_freq_current_label</span><span class="p">)</span>

    <span class="n">cpu_core_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">cpu_per_core</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">get_cpu_per_core</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">cpu_core_string</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">cpu_core_string</span> <span class="o">+=</span> <span class="s2">&quot;Core &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cpu_per_core</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;%</span><span class="se">\t</span><span class="s2">&quot;</span>

    <span class="n">cpu_core_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;CPU cores usage: &quot;</span> <span class="o">+</span> <span class="n">cpu_core_string</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpu_core_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span></div>


<div class="viewcode-block" id="create_memory_stats"><a class="viewcode-back" href="../main.html#main.create_memory_stats">[docs]</a><span class="k">def</span> <span class="nf">create_memory_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create memory stats tab content (chart, curve, labels) and start monitoring. Memory usage is updated every 1 second</span>
<span class="sd">    with memory usage in percent (total, available, used, free)</span>
<span class="sd">    :param tab: tab widget to add memory stats to</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get memory info in gb</span>
    <span class="n">memory_stats</span> <span class="o">=</span> <span class="n">get_memory_stats</span><span class="p">()</span>
    <span class="n">memory_stats</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">**</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">memory_stats</span><span class="p">]</span>

    <span class="n">memory_total_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Total memory: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_stats</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
    <span class="n">memory_available_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Available memory: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_stats</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
    <span class="n">memory_free_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;In use memory: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_stats</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
    <span class="n">memory_percent_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Memory usage: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_stats</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">memory_total_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">memory_available_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">memory_free_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">memory_percent_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span></div>


<div class="viewcode-block" id="create_partitions_stats"><a class="viewcode-back" href="../main.html#main.create_partitions_stats">[docs]</a><span class="k">def</span> <span class="nf">create_partitions_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create partitions stats tab content (chart, curve, labels) and start monitoring</span>
<span class="sd">    Partitions usage is updated every 1 second with partitions usage in percent for each partition</span>
<span class="sd">    :param tab: tab widget to add partitions stats to</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">partitions_info</span> <span class="o">=</span> <span class="n">get_partitions_info</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_info</span><span class="p">:</span>
        <span class="n">partition_layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

        <span class="c1"># partition name</span>
        <span class="n">partition_name_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Partition name: &quot;</span> <span class="o">+</span> <span class="n">partition</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">partition_name_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># partition total size</span>
        <span class="n">partition_total_size_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Total size: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">partition_total_size_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># partition used size</span>
        <span class="n">partition_used_size_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Used size: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">partition_used_size_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c1"># partition free size</span>
        <span class="n">partition_free_size_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Free size: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">partition_free_size_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c1"># partition usage</span>
        <span class="n">partition_usage_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Usage: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">)</span>
        <span class="n">partition_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">partition_usage_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">partition_layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="create_network_stats"><a class="viewcode-back" href="../main.html#main.create_network_stats">[docs]</a><span class="k">def</span> <span class="nf">create_network_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create network stats tab content (chart, curve, labels) and start monitoring. Network usage is updated every 1</span>
<span class="sd">    second with network sent and received bytes</span>
<span class="sd">    :param tab: tab widget to add network stats to</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">network_stats</span> <span class="o">=</span> <span class="n">get_network_usage</span><span class="p">()</span>

    <span class="n">network_sent_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Sent: (YELLOW) &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">network_stats</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; MB&quot;</span><span class="p">)</span>
    <span class="n">network_recv_label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Received: (GREEN) &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">network_stats</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; MB&quot;</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">network_sent_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">network_recv_label</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span></div>


<div class="viewcode-block" id="clear_history"><a class="viewcode-back" href="../main.html#main.clear_history">[docs]</a><span class="k">def</span> <span class="nf">clear_history</span><span class="p">(</span><span class="n">tab_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clear history csv file for tab type</span>
<span class="sd">    :param tab_type: tab type to clear history for</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">-%m-%Y_%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># cpu</span>
        <span class="c1"># clear cpu_stats.csv</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;src/history/cpu_stats.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;deleted cpu stats&quot;</span><span class="p">,</span> <span class="n">current_time</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># memory</span>
        <span class="c1"># clear memory_stats.csv</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;src/history/memory_stats.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;deleted memory stats&quot;</span><span class="p">,</span> <span class="n">current_time</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># disk</span>
        <span class="c1"># clear disk_stats.csv</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;src/history/disk_stats.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;deleted disk stats&quot;</span><span class="p">,</span> <span class="n">current_time</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># network</span>
        <span class="c1"># clear network_stats.csv</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;src/history/network_stats.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;deleted network stats&quot;</span><span class="p">,</span> <span class="n">current_time</span><span class="p">])</span></div>


<div class="viewcode-block" id="init_tab_layout"><a class="viewcode-back" href="../main.html#main.init_tab_layout">[docs]</a><span class="k">def</span> <span class="nf">init_tab_layout</span><span class="p">(</span><span class="n">tab</span><span class="p">:</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">resource_plot</span><span class="p">,</span> <span class="n">tab_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize tab layout with chart, curve, labels and start monitoring</span>
<span class="sd">    :param tab: tab widget to initialize</span>
<span class="sd">    :param resource_plot: chart to add to tab layout</span>
<span class="sd">    :param tab_type: tab type to initialize (cpu, memory, disk, network)</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">resource_plot</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># cpu</span>
        <span class="n">create_cpu_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># memory</span>
        <span class="n">create_memory_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># disk</span>
        <span class="n">create_partitions_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tab_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># network</span>
        <span class="n">create_network_stats</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>

    <span class="n">export_button</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Export chart&quot;</span><span class="p">)</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="n">export_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">export_chart</span><span class="p">(</span><span class="n">tab_type</span><span class="p">,</span> <span class="n">resource_plot</span><span class="p">))</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">export_button</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>

    <span class="n">clear_button</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Clear history&quot;</span><span class="p">)</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="n">clear_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">clear_history</span><span class="p">(</span><span class="n">tab_type</span><span class="p">))</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">clear_button</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>

    <span class="n">tab</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">tab</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_partitions_info"><a class="viewcode-back" href="../main.html#main.update_partitions_info">[docs]</a><span class="k">def</span> <span class="nf">update_partitions_info</span><span class="p">(</span><span class="n">disk_plot</span><span class="p">,</span> <span class="n">partitions_info</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update partitions info (chart, curve, labels)</span>
<span class="sd">    :param disk_plot: chart to update</span>
<span class="sd">    :param partitions_info: partitions info to update chart with</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_disk_space</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_info</span><span class="p">:</span>
        <span class="n">total_disk_space</span> <span class="o">+=</span> <span class="n">partition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">disk_plot</span><span class="o">.</span><span class="n">chart</span><span class="p">()</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Total disk space: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">total_disk_space</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; GB &quot;</span><span class="p">)</span>
    <span class="n">series</span> <span class="o">=</span> <span class="n">QPieSeries</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">partition</span> <span class="ow">in</span> <span class="n">partitions_info</span><span class="p">:</span>
        <span class="n">partition_slice_used</span> <span class="o">=</span> <span class="n">QPieSlice</span><span class="p">()</span>
        <span class="n">partition_slice_free</span> <span class="o">=</span> <span class="n">QPieSlice</span><span class="p">()</span>

        <span class="n">partition_slice_used</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; used &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
        <span class="n">partition_slice_free</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; free &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; GB&quot;</span><span class="p">)</span>
        <span class="n">partition_slice_used</span><span class="o">.</span><span class="n">setLabelVisible</span><span class="p">()</span>
        <span class="n">partition_slice_free</span><span class="o">.</span><span class="n">setLabelVisible</span><span class="p">()</span>

        <span class="n">partition_slice_used</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">partition_slice_free</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">partition</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

        <span class="n">series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partition_slice_used</span><span class="p">)</span>
        <span class="n">series</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">partition_slice_free</span><span class="p">)</span>

    <span class="n">old_slices</span> <span class="o">=</span> <span class="n">disk_plot</span><span class="o">.</span><span class="n">chart</span><span class="p">()</span><span class="o">.</span><span class="n">series</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">old_slice</span> <span class="ow">in</span> <span class="n">old_slices</span><span class="p">:</span>
        <span class="n">old_slice</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># disk_plot.chart().removeAllSeries()</span>

    <span class="c1"># update the chart with the new series</span>
    <span class="n">disk_plot</span><span class="o">.</span><span class="n">chart</span><span class="p">()</span><span class="o">.</span><span class="n">addSeries</span><span class="p">(</span><span class="n">series</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_monitoring_info"><a class="viewcode-back" href="../main.html#main.update_monitoring_info">[docs]</a><span class="k">def</span> <span class="nf">update_monitoring_info</span><span class="p">(</span><span class="n">resource_usage</span><span class="p">,</span> <span class="n">resource_curve</span><span class="p">,</span> <span class="n">resource_value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update monitoring info (chart, curve, labels) for cpu, memory, network</span>
<span class="sd">    :param resource_usage: resource usage to update chart with</span>
<span class="sd">    :param resource_curve: chart curve to update</span>
<span class="sd">    :param resource_value: label to update with resource usage value</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">resource_usage</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
        <span class="n">resource_usage</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">resource_usage</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource_value</span><span class="p">)</span>
    <span class="n">resource_curve</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">resource_usage</span><span class="p">)</span></div>


<div class="viewcode-block" id="update_plots"><a class="viewcode-back" href="../main.html#main.update_plots">[docs]</a><span class="k">def</span> <span class="nf">update_plots</span><span class="p">(</span><span class="n">cpu_tab</span><span class="p">,</span> <span class="n">memory_tab</span><span class="p">,</span> <span class="n">partitions_tab</span><span class="p">,</span> <span class="n">network_tab</span><span class="p">,</span> <span class="n">cpu_usage</span><span class="p">,</span> <span class="n">memory_usage</span><span class="p">,</span> <span class="n">disk_plot</span><span class="p">,</span>
                 <span class="n">network_sent_usage</span><span class="p">,</span> <span class="n">network_received_usage</span><span class="p">,</span> <span class="n">cpu_curve</span><span class="p">,</span>
                 <span class="n">memory_curve</span><span class="p">,</span> <span class="n">network_sent_curve</span><span class="p">,</span> <span class="n">network_received_curve</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update charts, curves, labels and start monitoring</span>
<span class="sd">    :param cpu_tab: cpu tab widget to update</span>
<span class="sd">    :param memory_tab: memory tab widget to update</span>
<span class="sd">    :param partitions_tab: disk tab widget to update</span>
<span class="sd">    :param network_tab: network tab widget to update</span>
<span class="sd">    :param cpu_usage: cpu usage to update chart with</span>
<span class="sd">    :param memory_usage: memory usage to update chart with</span>
<span class="sd">    :param disk_plot: disk chart to update</span>
<span class="sd">    :param network_sent_usage: network sent usage to update chart with</span>
<span class="sd">    :param network_received_usage: network received usage to update chart with</span>
<span class="sd">    :param cpu_curve: cpu chart curve to update</span>
<span class="sd">    :param memory_curve: memory chart curve to update</span>
<span class="sd">    :param network_sent_curve: network sent chart curve to update</span>
<span class="sd">    :param network_received_curve: network received chart curve to update</span>
<span class="sd">    :param app: application to process events</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># csv files for saving resource usage</span>
    <span class="n">cpu_csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;src/history/cpu_stats.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">cpu_csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">cpu_csv_file</span><span class="p">)</span>

    <span class="n">memory_csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;src/history/memory_stats.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">memory_csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">memory_csv_file</span><span class="p">)</span>

    <span class="n">disk_csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;src/history/disk_stats.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">disk_csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">disk_csv_file</span><span class="p">)</span>

    <span class="n">network_csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;src/history/network_stats.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">network_csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">network_csv_file</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># current date and time formatted</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#######################################################################################</span>
            <span class="c1"># ------------------------------- CPU TAB ---------------------------------------------#</span>
            <span class="c1"># update cpu usage</span>
            <span class="n">update_monitoring_info</span><span class="p">(</span><span class="n">cpu_usage</span><span class="p">,</span> <span class="n">cpu_curve</span><span class="p">,</span> <span class="n">get_cpu_usage</span><span class="p">())</span>

            <span class="c1"># update and save cpu stats</span>
            <span class="n">add_new_cpu_stats</span><span class="p">(</span><span class="n">cpu_tab</span><span class="p">,</span> <span class="n">cpu_csv_writer</span><span class="p">,</span> <span class="n">current_time</span><span class="p">)</span>

            <span class="c1"># ------------------------------- MEMORY TAB ---------------------------------------------#</span>
            <span class="c1"># update memory usage</span>
            <span class="n">update_monitoring_info</span><span class="p">(</span><span class="n">memory_usage</span><span class="p">,</span> <span class="n">memory_curve</span><span class="p">,</span> <span class="n">get_memory_usage</span><span class="p">())</span>

            <span class="c1"># update and save memory stats</span>
            <span class="n">add_new_memory_stats</span><span class="p">(</span><span class="n">memory_tab</span><span class="p">,</span> <span class="n">memory_csv_writer</span><span class="p">,</span> <span class="n">current_time</span><span class="p">)</span>

            <span class="c1"># ------------------------------- DISK TAB ---------------------------------------------#</span>
            <span class="c1"># update partitions usage</span>
            <span class="n">partitions_info</span> <span class="o">=</span> <span class="n">get_partitions_info</span><span class="p">()</span>
            <span class="n">disk_plot</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">update_partitions_info</span><span class="p">(</span><span class="n">disk_plot</span><span class="p">,</span> <span class="n">partitions_info</span><span class="p">)</span>

            <span class="c1"># update and save partitions stats</span>
            <span class="n">add_new_partitions_stats</span><span class="p">(</span><span class="n">partitions_tab</span><span class="p">,</span> <span class="n">disk_csv_writer</span><span class="p">,</span> <span class="n">current_time</span><span class="p">,</span> <span class="n">partitions_info</span><span class="p">)</span>

            <span class="c1"># ------------------------------- NETWORK TAB ---------------------------------------------#</span>
            <span class="c1"># update network usage</span>
            <span class="n">network_info</span> <span class="o">=</span> <span class="n">get_network_usage</span><span class="p">()</span>
            <span class="n">update_monitoring_info</span><span class="p">(</span><span class="n">network_sent_usage</span><span class="p">,</span> <span class="n">network_sent_curve</span><span class="p">,</span> <span class="n">network_info</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">update_monitoring_info</span><span class="p">(</span><span class="n">network_received_usage</span><span class="p">,</span> <span class="n">network_received_curve</span><span class="p">,</span> <span class="n">network_info</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

            <span class="c1"># update and save network stats</span>
            <span class="n">add_new_network_stats</span><span class="p">(</span><span class="n">network_tab</span><span class="p">,</span> <span class="n">network_csv_writer</span><span class="p">,</span> <span class="n">current_time</span><span class="p">,</span> <span class="n">network_info</span><span class="p">)</span>

            <span class="c1">############################################################################################</span>
            <span class="n">app</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="n">cpu_csv_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">memory_csv_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">disk_csv_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">network_csv_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">break</span></div>


<div class="viewcode-block" id="main"><a class="viewcode-back" href="../main.html#main.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main function to run the application</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cpu_usage</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">memory_usage</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">network_sent_usage</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">network_received_usage</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>

    <span class="c1"># add tabs for each resource</span>
    <span class="n">tabs</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">()</span>

    <span class="n">cpu_tab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">cpu_tab</span><span class="p">,</span> <span class="s2">&quot;CPU&quot;</span><span class="p">)</span>

    <span class="n">memory_tab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">memory_tab</span><span class="p">,</span> <span class="s2">&quot;Memory&quot;</span><span class="p">)</span>

    <span class="n">partitions_tab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">partitions_tab</span><span class="p">,</span> <span class="s2">&quot;Partitions&quot;</span><span class="p">)</span>

    <span class="n">network_tab</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
    <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">network_tab</span><span class="p">,</span> <span class="s2">&quot;Network&quot;</span><span class="p">)</span>

    <span class="c1"># init tabs content</span>
    <span class="n">cpu_plot</span> <span class="o">=</span> <span class="n">init_tab_content</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;CPU Usage&#39;</span><span class="p">)</span>
    <span class="n">cpu_curve</span> <span class="o">=</span> <span class="n">cpu_plot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pen</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

    <span class="n">memory_plot</span> <span class="o">=</span> <span class="n">init_tab_content</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">get_total_memory</span><span class="p">()],</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Memory Usage&#39;</span><span class="p">)</span>
    <span class="n">memory_curve</span> <span class="o">=</span> <span class="n">memory_plot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pen</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

    <span class="n">network_plot</span> <span class="o">=</span> <span class="n">init_tab_content</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Network&#39;</span><span class="p">)</span>
    <span class="n">network_received_curve</span> <span class="o">=</span> <span class="n">network_plot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pen</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Received&#39;</span><span class="p">)</span>
    <span class="n">network_sent_curve</span> <span class="o">=</span> <span class="n">network_plot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pen</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Sent&#39;</span><span class="p">)</span>

    <span class="n">partitions_chart</span> <span class="o">=</span> <span class="n">QChart</span><span class="p">()</span>
    <span class="n">partitions_chart</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># create the chart view as a QWidget</span>
    <span class="n">disk_plot</span> <span class="o">=</span> <span class="n">QtChart</span><span class="o">.</span><span class="n">QChartView</span><span class="p">(</span><span class="n">partitions_chart</span><span class="p">)</span>
    <span class="c1"># disk_plot.setRenderHint(QtGui.QPainter.Antialiasing)</span>

    <span class="c1"># init tabs layout</span>
    <span class="n">init_tab_layout</span><span class="p">(</span><span class="n">cpu_tab</span><span class="p">,</span> <span class="n">cpu_plot</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">init_tab_layout</span><span class="p">(</span><span class="n">memory_tab</span><span class="p">,</span> <span class="n">memory_plot</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">init_tab_layout</span><span class="p">(</span><span class="n">partitions_tab</span><span class="p">,</span> <span class="n">disk_plot</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">init_tab_layout</span><span class="p">(</span><span class="n">network_tab</span><span class="p">,</span> <span class="n">network_plot</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="c1"># new thread for updating the plots</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">update_plots</span><span class="p">,</span>
                              <span class="n">args</span><span class="o">=</span><span class="p">(</span>
                                  <span class="n">cpu_tab</span><span class="p">,</span> <span class="n">memory_tab</span><span class="p">,</span> <span class="n">partitions_tab</span><span class="p">,</span> <span class="n">network_tab</span><span class="p">,</span> <span class="n">cpu_usage</span><span class="p">,</span> <span class="n">memory_usage</span><span class="p">,</span> <span class="n">disk_plot</span><span class="p">,</span>
                                  <span class="n">network_sent_usage</span><span class="p">,</span> <span class="n">network_received_usage</span><span class="p">,</span>
                                  <span class="n">cpu_curve</span><span class="p">,</span> <span class="n">memory_curve</span><span class="p">,</span> <span class="n">network_sent_curve</span><span class="p">,</span> <span class="n">network_received_curve</span><span class="p">,</span> <span class="n">app</span><span class="p">))</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">tabs</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Samuel Chiscari.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>